<!DOCTYPE html>
<html lang="en">
<head>
	<title>GameSpace</title>
	    <meta charset="UTF-8">
    <meta name="description" content="GameSpace">
    <meta name="keywords" content="Game">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <body onload="loaduser()">
    <!-- Favicon -->   

    <link href="img/favicon.ico" rel="shortcut icon"/>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i,700,700i" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/font-awesome.min.css"/>
    <link rel="stylesheet" href="css/owl.carousel.css"/>
    <link rel="stylesheet" href="css/style.css"/>
    <link rel="stylesheet" href="css/animate.css"/>

    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/plyr.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">

    <script src="lib/axios/dist/axios.standalone.js"></script>
    <script src="lib/CryptoJS/rollups/hmac-sha256.js"></script>
    <script src="lib/CryptoJS/rollups/sha256.js"></script>
    <script src="lib/CryptoJS/components/hmac.js"></script>
    <script src="lib/CryptoJS/components/enc-base64.js"></script>
    <script src="lib/url-template/url-template.js"></script>
    <script src="lib/apiGatewayCore/sigV4Client.js"></script>
    <script src="lib/apiGatewayCore/apiGatewayClient.js"></script>
    <script src="lib/apiGatewayCore/simpleHttpClient.js"></script>
    <script src="lib/apiGatewayCore/utils.js"></script>



</head>
<body>
	<!-- Page Preloder -->
<!-- 	<div id="preloder">
		<div class="loader"></div>
	</div> -->

	<!-- Header section -->
    <header class="header-section">
    <div class="container">
            <!-- logo -->
            <a class="site-logo" href="index.html">
                <img src="img/logo.png" alt="">
            </a>

            <!-- responsive -->
            <div class="nav-switch">
                <i class="fa fa-bars"></i>
            </div>
            <!-- site menu -->
            <nav class="main-menu">
                <ul>
					<li><a href="userpage.html">Home</a></li>
                    <li><a href="review.html">Games</a></li>
                    <li><a href="community.html">Forums</a></li>
                    <li><a href="search.html">Search</a></li>                   
                </ul>
            </nav>
            <div class="searchcy-panel">
                <form class="search-model-form">
                     <input type="text" id="search-input" placeholder="Search here....." style="width: 300px;">
                </form>
                <a href="./search.html" class="search-switch"><span class="icon_search"></span></a>
                <b> asasdasdd </span></b>
                <a href="./userpage.html"><span class="icon_profile" style="margin-left: 200px;"></span></a>
            </div>
        </div>
    </header>
	<!-- Header section end -->


	<!-- Page info section -->
	<section class="page-info-section set-bg" data-setbg="img/page-top-bg/5.jpg">
		<div class="pi-content">
			<div class="container">
				<div class="row">
					<div class="col-xl-5 col-lg-6 text-white">
						<h2>Welcome Back</h2>
						<!-- <p>  </p> -->
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- Page info section -->


	<section class="page-section spad contact-page">
		<div class="container">
		<!-- 	<div class="map" id="map-canvas"></div>
 -->			<div class="row">
				<div class="col-lg-4 mb-5 mb-lg-0">
					<h4 class="comment-title">User Information</h4>
					<!-- <p>Odio ultrices ut. Etiam ac erat ut enim maximus accumsan vel ac nisl. Duis feug iat bibendum orci, non elementum urna. Cras sit amet sapien aliquam.</p> -->
					<div class="row">
						<div class="col-md-9">
							<ul class="contact-info-list">
								<li><div class="cf-left">User Name:</div><div class="cf-right" id="User_Name"> No User Name</div></li>
								<li><div class="cf-left">Phone:</div><div class="cf-right" id="Phone_num">No Phone Number</div></li>
								<li><div class="cf-left">E-mail:</div><div class="cf-right" id="E-mail">Need to be changed</div></li>
							</ul>
						</div>
					</div>
				</div>
				<div class="col-lg-8">
					<div class="contact-form-warp">
						<h4 class="comment-title">Edit your personal information:</h4>
						<form class="comment-form">
							<div class="row">
								<div class="col-md-4">
									<input id="username" type="text" name = "user_name" placeholder="User Name" >
								</div>
								<div class="col-md-4">
									<input id="email" type="email" name = "email" placeholder="E-mail">
								</div>	
								<div class="col-lg-4">
									<input id="phone" type="text" name = "phone" placeholder="Phone">
								</div>
								<button onclick="edituserinfo()" type="button"  class="site-btn btn-sm">Edit</button>
							</div>
								<div class="row">
									<div class="col-md-9">
										<ul class="contact-info-list">
								<h4 class="comment-title">Post Forum:</h4>
								<form class="comment-form">
									<div class="row">
										<div class="col-lg-12">
											<input id="subject" type="text" placeholder="Subject">
											<textarea id="post_detail" placeholder="Post your forum to the community! Sell your personal games! Share your gaming experience! Find your teammates!"></textarea>
											<button onclick="uploadPost()" class="site-btn btn-sm" type="button">Post</button>
										</div>
									</div>
								</form>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<!-- <div id = "div">
        	<div class="cf-right" id="text"> 123</div>
        </div> -->
	</section>
	<!-- Page section end -->

<section class="page-section community-page set-bg" >
		<!-- <div class="community-warp spad"> -->
			<div class="container">
				<div class="row">
					<div class="col-md-6">
						<h3 class="community-top-title">Your Post History</h3>
					</div>
					<div class="col-md-6 text-lg-right">
						<!-- <form class="community-filter">
							<label for="fdf5">Show</label>
							<select id="fdf5">
								<option value="#">Everything</option>
								<option value="#">Everything</option>
							</select>
						</form> -->
					</div>
				</div>
				<ul class="community-post-list">
					<li>
						<div class="community-post">
							<!-- <div class="author-avator set-bg" data-setbg="img/authors/1.jpg"></div> -->
							<div class="post-content">
								<h5 id ="post_user_name"> <span> </span></h5>
								<div id = "post_date" class="post-date"></div>
								<p id = "post_content"> </p>
							</div>
						</div>
					</li>
				</ul>
				<div class="site-pagination sp-style-2">
					<span class="active">01.</span>
					<a href="#">02.</a>
					<a href="#">03.</a>
				</div>
			</div>
		</div>
	</section>

	<!-- Footer top section -->		<!-- Footer top section -->
		<section class="footer-top-section">
			<div class="container">
				<div class="footer-top-bg">
					<img src="img/gs_icon.png" alt=""  height="250" width="250" style="margin-bottom: 50px;margin-left: 430px;">
				</div>
				<div class="row">
					<div class="col-lg-4">
						<div class="footer-logo text-white">
							<img src="img/gs-logo.png" alt="">
						</div>
				</div>
			</div>
		</section>
		<!-- Footer top section end -->


	
	<!-- Footer section -->
	<footer class="footer-section">
		<div class="container">
			<ul class="footer-menu">
				<li><a href="userpage.html">Home</a></li>
				<li><a href="review.html">Games</a></li>
				<li><a href="community.html">Forums</a></li>
				<li><a href="search.html">Search</a></li>
			</ul>

		</div>
	</footer>
	<!-- Footer section end -->


	<!--====== Javascripts & Jquery ======-->
	<script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/jquery.marquee.min.js"></script>
	<script src="js/main.js"></script>
	
	<!-- <script src="test.js"></script> -->
    <script src="apigClient.js"></script>
    <script>


    	function loaduser() {		
			var apigClient = apigClientFactory.newClient({apiKey: "hpUV56GBup3D38aMb236J89YtbiZvRqD5FsIkibC"});
			var params = {};
			var body = {};
			var additionalParams = {headers: {'Content-Type':"application/json"}};

    		apigClient.userinfoGet(params, body, additionalParams)
			    .then(function (result) {
			      console.log('@apigClient_userinfoGet success');
			      console.log(result);
			      showtext(result.data.body);
			    }).catch(function (result) {
			      console.log("failed......");
			      console.log(result);
			    });
		}

		function showtext(res){
			// var newDiv = document.getElementById("text");
			console.log("@showtext, result is",res);
			// console.log("@showtext, result is",res["email"]);
			// console.log("@showtext, ",temp);
			
			console.log("email",res.split(","))
			var res1 = res.split(",")
			var email = res1[0].slice(2,-1)
			var name = res1[1].slice(2,-1)
			var number = res1[2].slice(2,-2)
			document.getElementById("E-mail").innerHTML=email;
			document.getElementById("Phone_num").innerHTML=number;
			document.getElementById("User_Name").innerHTML=name;
		}

		function edituserinfo() {		
			var phone = document.getElementById("phone").value;	
			var username = document.getElementById("username").value;	
			var email = document.getElementById("email").value;	
			console.log("phone",phone);

			var apigClient = apigClientFactory.newClient({apiKey: "hpUV56GBup3D38aMb236J89YtbiZvRqD5FsIkibC"});
			var params = {
				"phone": phone,
				"username":username,
				"email":email
			};
			var body = {
				"phone": phone,
				"username":username,
				"email":email
			};

			var additionalParams = {headers: {'Content-Type':"application/json"}, queryParams: {
        		"phone": phone,"username":username,"email":email}};


    		console.log("i'm in edit")
			apigClient.userinfoPost(params, body, additionalParams)
			    .then(function (result) {
			      console.log('@apigClient_rootpost success');
			      console.log(result);
			      // showtext(result.data.body);
			    }).catch(function (result) {
			      console.log("failed..edituserinfo");
			      console.log(result);
			    });
			document.getElementById("phone").value = '';	
			document.getElementById("username").value = '';	
			document.getElementById("email").value = '';	  
		}

		function uploadPost() {		
			var subject = document.getElementById("subject").value;	
			var post_detail = document.getElementById("post_detail").value;	
			console.log("subject",subject);

			var apigClient = apigClientFactory.newClient({apiKey: "hpUV56GBup3D38aMb236J89YtbiZvRqD5FsIkibC"});
			var params = {
				"subject": subject,
				"post_detail":post_detail
			};
			var body = {
				"subject": subject,
				"post_detail":post_detail
			};

			var additionalParams = {headers: {'Content-Type':"application/json"}, queryParams: {
        		"subject": subject, "post_detail":post_detail}};


    		console.log("i'm in uploadPost")
			apigClient.postforumPost(params, body, additionalParams)
			    .then(function (result) {
			      console.log('@apigClient_postforumPost success');
			      console.log(result);
			    }).catch(function (result) {
			      console.log("failed..postforumPost");
			      console.log(result);
			    });
			document.getElementById("subject").value = '';	
			document.getElementById("post_detail").value = '';	
		}


    </script>	
	<!-- load for map -->
	<!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCWTIlluowDL-X4HbYQt3aDw_oi2JP0Krc&sensor=false"></script>
	<script src="js/map.js"></script>
 -->
    </body>
</html>