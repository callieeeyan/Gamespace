<!DOCTYPE html>
<html lang="en">
<head>
	<title>GameSpace</title>
	    <meta charset="UTF-8">
    <meta name="description" content="GameSpace">
    <meta name="keywords" content="Game">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <body onload="loaduser_forum()">
    <link href="img/favicon.ico" rel="shortcut icon"/>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i,700,700i" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/font-awesome.min.css"/>
    <link rel="stylesheet" href="css/owl.carousel.css"/>
    <link rel="stylesheet" href="css/style.css"/>
    <link rel="stylesheet" href="css/animate.css"/>

    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/plyr.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">


    <script src="lib/axios/dist/axios.standalone.js"></script>
    <script src="lib/CryptoJS/rollups/hmac-sha256.js"></script>
    <script src="lib/CryptoJS/rollups/sha256.js"></script>
    <script src="lib/CryptoJS/components/hmac.js"></script>
    <script src="lib/CryptoJS/components/enc-base64.js"></script>
    <script src="lib/url-template/url-template.js"></script>
    <script src="lib/apiGatewayCore/sigV4Client.js"></script>
    <script src="lib/apiGatewayCore/apiGatewayClient.js"></script>
    <script src="lib/apiGatewayCore/simpleHttpClient.js"></script>
    <script src="lib/apiGatewayCore/utils.js"></script>
    <script src="function.js"></script>
	<!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

</head>
<body>
	<!-- Page Preloder -->
	<div id="preloder">
		<div class="loader"></div>
	</div>

	<!-- Header section -->
    <header class="header-section">
    <div class="container">
            <!-- logo -->
            <a class="site-logo" href="index.html">
                <img src="img/logo.png" alt="">
            </a>


            <!-- responsive -->
            <div class="nav-switch">
                <i class="fa fa-bars"></i>
            </div>
            <!-- site menu -->
            <nav class="main-menu">
                <ul>
                    <li><a href="userpage.html">Home</a></li>
                    <li><a href="review.html">Games</a></li>
                     
                    <li><a href="community.html">Forums</a></li>
                    <li><a href="search.html">Search</a></li>
                </ul>
            </nav>
            <div class="searchcy-panel">
                <form class="search-model-form">
                     <input type="text" id="search-input" placeholder="Search here....." style="width: 300px;">
                </form>
                <a href="./search.html" class="search-switch"><span class="icon_search"></span></a>
                <b> asasdasdd </span></b>
                <a href="./userpage.html"><span class="icon_profile" style="margin-left: 200px;"></span></a>
            </div>
        </div>
    </header>
	<!-- Header section end -->





	<!-- Page info section -->
	<section class="page-info-section set-bg" data-setbg="img/page-top-bg/4.jpg">
		<div class="pi-content">
			<div class="container">
				<div class="row">
					<div class="col-xl-5 col-lg-6 text-white">
						<h2>Our Community</h2>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- Page info section -->


<!-- Page section -->
	<section class="page-section community-page set-bg" data-setbg="img/community-bg.jpg">
		<div class="community-warp spad">
			<div class="container">
				<div class="search-form-warp">
					<h4 class="comment-title">Search post you may like:</h4>
					<form class="comment-form">
						<div class="row">
							<div class="col-lg-12">
								<input id = "searchinfo" type="text" placeholder="find some posts">
								<button onclick="searchpost()" class="site-btn btn-sm" type="button">Search</button>
							</div>
							
						</div>
						<ul id = "forumsection1" class="community-post-list">
						</ul>
					</form>
				</div>
				<div class="row">
					<div class="col-md-6">
						<h3 class="community-top-title" style="margin-top: 200px;">All Posts:</h3>
					</div>
				</div>
				<ul id = "forumsection" class="community-post-list">
				</ul>
			</div>
		</div>
	</section>
	<!-- Page section end -->



	<!-- Footer top section -->
	<section class="footer-top-section">
		<div class="container">
			<div class="footer-top-bg">
				<img src="img/gs_icon.png" alt=""  height="250" width="250" style="margin-bottom: 50px;margin-left: 430px;">
			</div>
			<div class="row">
				<div class="col-lg-4">
					<div class="footer-logo text-white">
						<img src="img/gs-logo.png" alt="">
					</div>
			</div>
		</div>
	</section>
	<!-- Footer top section end -->

	
	<!-- Footer section -->
	<footer class="footer-section">
		<div class="container">
			<ul class="footer-menu">
				<li><a href="userpage.html">Home</a></li>
				<li><a href="review.html">Games</a></li>
				 
				<li><a href="community.html">Forums</a></li>
				<li><a href="search.html">Search</a></li>
			</ul>
		</div>
	</footer>
	<!-- Footer section end -->


	<!--====== Javascripts & Jquery ======-->
	<script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/jquery.marquee.min.js"></script>
	<script src="js/main.js"></script>
	<script src="apigClient.js"></script>
	<script>
		function loaduser_forum() {		
			var apigClient = apigClientFactory.newClient({apiKey: "hpUV56GBup3D38aMb236J89YtbiZvRqD5FsIkibC"});
			var params = {};
			var body = {};
			var additionalParams = {headers: {'Content-Type':"application/json"}};

			apigClient.forumpageGet(params, body, additionalParams)
			    .then(function (result) {
			      console.log('@apigClient_forumpageGet success');
			      console.log(result);
			      showtext2(result.data.body);
			    }).catch(function (result) {
			      console.log("failed......");
			      console.log(result);
			    });

		}

		function searchpost() {		
			var search_input = document.getElementById("searchinfo").value;	
			
			console.log("search_input",search_input);
			var apigClient = apigClientFactory.newClient({apiKey: "hpUV56GBup3D38aMb236J89YtbiZvRqD5FsIkibC"});
			var params = {
				"seachinfo":search_input
			};
			var body = {
				"seachinfo":search_input
			};
			var additionalParams = {headers: {'Content-Type':"application/json"}, queryParams: {"seachinfo":search_input}};

			apigClient.forumpagePost(params, body, additionalParams)
			    .then(function (result) {
			      console.log('@apigClient_searchGet success');
			      console.log(result);
			      showtext3(result.data.body);
			    }).catch(function (result) {
			      console.log("failed..searchGet.");
			      console.log(result);
			    });
			document.getElementById("searchinfo").value = "";
		}

		function showtext3(result){
			// var newDiv = document.getElementById("text");
			console.log("@showtext, result is",result);
			// var result = JSON.parse(res);
			console.log("@after parse",result);
			var insertlocation = document.getElementById('forumsection1');
			for (i=0; i<result.length; i++){
				console.log("@for loop parse",result[i]);
				var email = result[i].email;
			    var name = result[i].username;
			    var number = result[i].phone;
				var subject = result[i].subject;
			    var detail = result[i].detail;
			    var time = result[i].time;
			    console.log("email i",email);
		    	var str = '<li >\
					<div class="community-post">\
						<div class="post-content">\
							<h5 ">'+ subject + '<span>'+ time  +'</span></h5>\
							<div class="post-date"> '+ name+ '</div>\
							<p> <a href="sendemail.html" onclick="sendemail()">' + email+ '</a></p>\
							<p>'+ detail + ' </p>\
						</div>\
					</div>\
				</li>';
				insertlocation.insertAdjacentHTML('beforeend', str);
			}
		}

		function showtext2(res){
			// var newDiv = document.getElementById("text");
			console.log("@showtext, result is",res);
			var result = JSON.parse(res);
			console.log("@after parse",result);

			for (i=0; i<result.length; i++){
				console.log("@for loop parse",result[i]);
				var email = result[i].email;
			    var name = result[i].username;
			    var number = result[i].phone;
				var subject = result[i].subject;
			    var detail = result[i].detail;
			    var time = result[i].time;

			    var insertlocation = document.getElementById('forumsection');

				for (j=0; j<subject.length; j++){

					var subject_temp = subject[j];
					var detail_temp = detail[j];
					var time_temp = time[j];
					console.log("subject_temp",subject_temp)

					var str = '<li >\
								<div class="community-post">\
									<div class="post-content">\
										<h5 ">'+ subject_temp + '<span>'+ time_temp  +'</span></h5>\
										<div class="post-date"> '+ name+ '</div>\
										<p> <a href="sendemail.html" onclick="sendemail()">' + email+ '</a></p>\
										<p>'+ detail_temp + ' </p>\
									</div>\
								</div>\
							</li>';
					insertlocation.insertAdjacentHTML('beforeend', str);
				}
			}
		}
	</script>
    </body>
</html>